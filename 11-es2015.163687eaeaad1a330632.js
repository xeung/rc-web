(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{A8Ph:function(t,e,c){"use strict";c.r(e),c.d(e,"JobsModule",(function(){return ct}));var n=c("ofXK"),s=c("aceb"),i=c("LPYB"),r=c("JU/d"),o=c("FTbq"),a=c("V2v1"),l=c("G3Ii"),u=c("tyNb"),d=c("U5lE"),h=c("x0Mr"),b=c("XNiG"),p=c("itXk"),g=c("lJxs"),f=c("GJmQ"),m=c("JYL7"),v=c("yCtX"),O=c("DH7j"),x=c("7o/Q"),y=c("l7GE"),w=c("ZUHj"),M=c("Lhse");class C{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new k(t,this.resultSelector))}}class k extends x.a{constructor(t,e,c=Object.create(null)){super(t),this.iterators=[],this.active=0,this.resultSelector="function"==typeof e?e:null,this.values=c}_next(t){const e=this.iterators;Object(O.a)(t)?e.push(new j(t)):e.push("function"==typeof t[M.a]?new S(t[M.a]()):new $(this.destination,this,t))}_complete(){const t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(let c=0;c<e;c++){let e=t[c];e.stillUnsubscribed?this.destination.add(e.subscribe(e,c)):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const t=this.iterators,e=t.length,c=this.destination;for(let i=0;i<e;i++){let e=t[i];if("function"==typeof e.hasValue&&!e.hasValue())return}let n=!1;const s=[];for(let i=0;i<e;i++){let e=t[i],r=e.next();if(e.hasCompleted()&&(n=!0),r.done)return void c.complete();s.push(r.value)}this.resultSelector?this._tryresultSelector(s):c.next(s),n&&c.complete()}_tryresultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(c){return void this.destination.error(c)}this.destination.next(e)}}class S{constructor(t){this.iterator=t,this.nextResult=t.next()}hasValue(){return!0}next(){const t=this.nextResult;return this.nextResult=this.iterator.next(),t}hasCompleted(){const t=this.nextResult;return t&&t.done}}class j{constructor(t){this.array=t,this.index=0,this.length=0,this.length=t.length}[M.a](){return this}next(t){const e=this.index++;return e<this.length?{value:this.array[e],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class $ extends y.a{constructor(t,e,c){super(t),this.parent=e,this.observable=c,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[M.a](){return this}next(){const t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(t,e,c,n,s){this.buffer.push(e),this.parent.checkIterators()}subscribe(t,e){return Object(w.a)(this,this.observable,this,e)}}var G=c("LRne"),P=c("zp1y"),_=c("eIep"),U=c("bOdf"),I=c("3E0/"),R=c("fXoL"),T=c("L7Zs");function V(t,e){if(1&t){const t=R.fc();R.ec(0,"nb-list-item",4),R.mc("click",(function(c){R.Kc(t);const n=e.index,s=R.oc();return s.check[n]=!s.check[n],c.preventDefault()})),R.ec(1,"nb-checkbox",5),R.mc("checkedChange",(function(c){R.Kc(t);const n=e.index;return R.oc().check[n]=c})),R.dc(),R.ec(2,"label"),R.Uc(3),R.dc(),R.dc()}if(2&t){const t=e.$implicit,c=e.index,n=R.oc();R.Mb(1),R.wc("checked",n.check[c]),R.Mb(2),R.Vc(t)}}let K=(()=>{class t{constructor(t,e){this.dialog=t,this.cmdService=e,this.finishedGroup=[],this.check=[],this.loading=!1,this.deleteTrigger=new b.a,this.context=t.context}confirm(){this.deleteTrigger.next(this.finishedGroup.filter((t,e)=>this.check[e])),this.dialog.close()}ngOnInit(){const t=this,e=new b.a,c=new class extends m.j{constructor(){super(...arguments),this.prerequest$=e.pipe(Object(P.a)(t.cmdService.listCmd$.verify(this.cmd)),Object(g.a)(t=>t[1]))}};c.deploy();const n=new class extends m.e{constructor(){super(...arguments),this.prerequest$=e.pipe(Object(P.a)(t.cmdService.listCmd$.verify(this.cmd)),Object(g.a)(t=>t[1]))}};n.deploy(),this.loading=!0,c.clearCache(),n.clearCache(),function(...t){const e=t[t.length-1];return"function"==typeof e&&t.pop(),Object(v.a)(t,void 0).lift(new C(e))}(c.getOutput(),n.getOutput()).subscribe(([t,e])=>{if(this.loading=!1,0!==t[1].length||0!==e[1].length)return;const c=e[0]["core-stats"].transferring;this.finishedGroup=c?t[0].groups.filter(t=>!c.some(e=>t===e.group)):t[0].groups,this.check=this.finishedGroup.map(()=>!0)}),e.next(),this.deleteStates$=new class extends m.d{constructor(){super(...arguments),this.prerequest$=t.deleteTrigger.pipe(Object(P.a)(t.cmdService.listCmd$.verify(this.cmd)),Object(_.a)(([t,e])=>0!==e[1].length?Object(G.a)([{},e[1]]):Object(G.a)(...t.map(t=>[Object.assign(Object.assign({},e[0]),{group:t}),[]]))),Object(U.a)(t=>Object(G.a)(t).pipe(Object(I.a)(1e3))))}},this.deleteStates$.deploy(),this.deleteStates$.getOutput().subscribe()}}return t.\u0275fac=function(e){return new(e||t)(R.Yb(d.d),R.Yb(T.a))},t.\u0275cmp=R.Sb({type:t,selectors:[["ng-component"]],decls:11,vars:2,consts:[["spinnerMessage","Loading...",3,"nbSpinner"],[3,"click",4,"ngFor","ngForOf"],["nbButton","","status","danger",3,"click"],["nbButton","","status","success",1,"push-to-right",3,"click"],[3,"click"],[3,"checked","checkedChange"]],template:function(t,e){1&t&&(R.ec(0,"nb-card"),R.ec(1,"nb-card-header"),R.Uc(2," Select groups to be deleted "),R.dc(),R.ec(3,"nb-card-body",0),R.ec(4,"nb-list"),R.Sc(5,V,4,2,"nb-list-item",1),R.dc(),R.dc(),R.ec(6,"nb-card-footer"),R.ec(7,"button",2),R.mc("click",(function(){return e.dialog.dismiss()})),R.Uc(8,"Close"),R.dc(),R.ec(9,"button",3),R.mc("click",(function(){return e.confirm()})),R.Uc(10," Confirm "),R.dc(),R.dc(),R.dc()),2&t&&(R.Mb(3),R.wc("nbSpinner",e.loading),R.Mb(2),R.wc("ngForOf",e.finishedGroup))},directives:[s.r,s.u,s.q,s.ab,s.M,n.n,s.s,s.n,s.N,s.w],styles:["nb-card[_ngcontent-%COMP%] {\n\t\t\t\tmargin: calc(-1em - 5px);\n\t\t\t}\n\t\t\tnb-card-header[_ngcontent-%COMP%], nb-card-footer[_ngcontent-%COMP%] {\n\t\t\t\tdisplay: flex;\n\t\t\t}\n\t\t\tlabel[_ngcontent-%COMP%] {\n\t\t\t\tpadding-left: 0.75rem;\n\t\t\t}\n\t\t\t.push-to-right[_ngcontent-%COMP%] {\n\t\t\t\tmargin-left: auto;\n\t\t\t}"]}),t})();function L(t,e){1&t&&(R.Zb(0,"nb-icon",2),R.Uc(1," Reset stats "))}let z=(()=>{class t{constructor(t,e,c){this.contextMenuService=t,this.cmdService=e,this.toastrService=c,this.resetTrigger=new b.a}onContextMenu(t,e){this.contextMenuService.show.next({contextMenu:this.contextMenu,event:t,item:e}),t.preventDefault(),t.stopPropagation()}resetStats(t){this.resetTrigger.next(t)}ngOnInit(){const t=this;this.resetStats$=new class extends m.f{constructor(){super(...arguments),this.prerequest$=t.resetTrigger.pipe(Object(P.a)(t.cmdService.listCmd$.verify(this.cmd)),Object(g.a)(([t,e])=>0!==e[1].length?[{},e[1]]:t&&""!==t?[Object.assign(Object.assign({},e[0]),{group:t}),[]]:e))}},this.resetStats$.deploy(),this.resetStats$.getSupersetOutput().subscribe(t=>{let e=t[0]&&t[0].group;e||(e="[All]"),0===t[1].length?this.toastrService.success(`${e}`,"Reset stats success"):this.toastrService.danger(`${e}`,"Reset stats failure")})}}return t.\u0275fac=function(e){return new(e||t)(R.Yb(r.c),R.Yb(T.a),R.Yb(s.ib))},t.\u0275cmp=R.Sb({type:t,selectors:[["app-job-group-options-context-menu"]],inputs:{contextMenu:"contextMenu"},decls:3,vars:0,consts:[["OptionMenu",""],["contextMenuItem","",3,"execute"],["icon","refresh"]],template:function(t,e){1&t&&(R.ec(0,"context-menu",null,0),R.Sc(2,L,2,0,"ng-template",1),R.mc("execute",(function(t){return e.resetStats(t.item)})),R.dc())},directives:[r.a,r.d,s.C],encapsulation:2}),t})();var B=c("gVoi"),Y=c("3RaO"),F=c("HRdY"),H=c("QKBS");function q(t,e){if(1&t&&(R.ec(0,"td"),R.Uc(1),R.dc(),R.ec(2,"td",1),R.Uc(3),R.dc(),R.ec(4,"td",1),R.Uc(5),R.dc(),R.ec(6,"td",1),R.Uc(7),R.dc(),R.ec(8,"td",1),R.Uc(9),R.dc()),2&t){const t=e.$implicit;R.Mb(1),R.Vc(t.name),R.Mb(2),R.Vc(t.sizeHumanReadable),R.Mb(2),R.Vc(t.percentage),R.Mb(2),R.Vc(t.speedHumanReadable),R.Mb(2),R.Vc(t.etaHumanReadable)}}let A=(()=>{class t{constructor(){this.columns=[{key:"name",title:"Name",width:"80%"},{key:"size",title:"Size"},{key:"percentage",title:"Percentage"},{key:"speed",title:"Speed"},{key:"eta",title:"eta"}],this.data=[]}ngOnInit(){this.stats$.getOutput().subscribe(([t,e])=>{0===e.length&&(this.data=t["core-stats"].transferring||[],this.data.forEach(t=>{t.sizeHumanReadable=Object(F.a)(t.size,3),t.speedHumanReadable=Object(F.a)(t.speed)+"/s",t.etaHumanReadable="number"==typeof t.eta?H.a.humanize(1e3*t.eta,{largest:3}):"-"}))}),this.configuration=Object.assign({},o.c),this.configuration.searchEnabled=!0,this.configuration.isLoading=!1}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=R.Sb({type:t,selectors:[["app-jobs-transferring"]],inputs:{stats$:"stats$"},decls:2,vars:3,consts:[[1,"dark",3,"configuration","data","columns"],[1,"mono"]],template:function(t,e){1&t&&(R.ec(0,"ngx-table",0),R.Sc(1,q,10,5,"ng-template"),R.dc()),2&t&&R.wc("configuration",e.configuration)("data",e.data)("columns",e.columns)},directives:[o.b],styles:["td[_ngcontent-%COMP%] {\n\t\t\t\tfont-family: Pretendard, sans-serif;\n\t\t\t\tword-break: break-all;\n\t\t\t\twhite-space: normal;\n\t\t\t}\n\t\t\ttd.mono[_ngcontent-%COMP%] {\n\t\t\t\tfont-family: Menlo, monospace;\n\t\t\t\tword-break: keep-all;\n\t\t\t\twhite-space: nowrap;\n\t\t\t}"]}),t})();const J=function(t){return{"active-group":t}};function N(t,e){if(1&t){const t=R.fc();R.ec(0,"nb-list-item",15),R.mc("click",(function(){R.Kc(t);const c=e.$implicit;return R.oc(2).activateGroup(c)})),R.Uc(1),R.ec(2,"nb-icon",16),R.mc("click",(function(c){R.Kc(t);const n=e.$implicit;return R.oc(2),R.Gc(3).onContextMenu(c,n)})),R.dc(),R.dc()}if(2&t){const t=e.$implicit,c=R.oc(2);R.wc("ngClass",R.Ac(2,J,c.activeGroup===t)),R.Mb(1),R.Wc(" ",t," ")}}const Z=function(t){return{"infinte-rotate":t}};function E(t,e){if(1&t){const t=R.fc();R.ec(0,"nb-sidebar",12),R.ec(1,"nb-card-header"),R.Uc(2," Groups "),R.ec(3,"nb-icon",13),R.mc("click",(function(){return R.Kc(t),R.oc().clearGroups()})),R.dc(),R.ec(4,"nb-icon",14),R.mc("click",(function(){return R.Kc(t),R.oc().refreshList()})),R.dc(),R.dc(),R.ec(5,"nb-list"),R.ec(6,"nb-list-item",15),R.mc("click",(function(){return R.Kc(t),R.oc().activateGroup("")})),R.Uc(7," [All] "),R.ec(8,"nb-icon",16),R.mc("click",(function(e){return R.Kc(t),R.oc(),R.Gc(3).onContextMenu(e,"")})),R.dc(),R.dc(),R.Sc(9,N,3,4,"nb-list-item",17),R.dc(),R.dc()}if(2&t){const t=R.oc();R.Mb(4),R.wc("ngClass",R.Ac(3,Z,t.refreshing)),R.Mb(2),R.wc("ngClass",R.Ac(5,J,""===t.activeGroup)),R.Mb(3),R.wc("ngForOf",t.groups)}}function X(t,e){if(1&t&&(R.ec(0,"nb-option",22),R.Uc(1),R.dc()),2&t){const t=e.$implicit;R.wc("value",t),R.Mb(1),R.Wc(" ",t,"")}}function W(t,e){if(1&t){const t=R.fc();R.ec(0,"nb-card"),R.ec(1,"nb-card-header"),R.ec(2,"nb-icon",18),R.mc("click",(function(){return R.Kc(t),R.oc().clearGroups()})),R.dc(),R.ec(3,"nb-select",19),R.mc("selectedChange",(function(e){return R.Kc(t),R.oc().activeGroup=e}))("selectedChange",(function(){R.Kc(t);const e=R.oc();return e.activateGroup(e.activeGroup)})),R.ec(4,"nb-option",20),R.Uc(5,"[All]"),R.dc(),R.Sc(6,X,2,2,"nb-option",21),R.dc(),R.ec(7,"nb-icon",14),R.mc("click",(function(){return R.Kc(t),R.oc().refreshList()})),R.dc(),R.dc(),R.dc()}if(2&t){const t=R.oc();R.Mb(3),R.wc("selected",t.activeGroup),R.Mb(3),R.wc("ngForOf",t.groups),R.Mb(1),R.wc("ngClass",R.Ac(3,Z,t.refreshing))}}function D(t,e){if(1&t){const t=R.fc();R.ec(0,"nb-icon",16),R.mc("click",(function(e){R.Kc(t);const c=R.oc();return R.Gc(3).onContextMenu(e,c.activeGroup)})),R.dc()}}const Q=function(){return["xl","lg","md"]},tt=[{path:"",component:(()=>{class t{constructor(t,e){this.cmdService=t,this.modal=e,this.activeGroup="",this.groups=[],this.listTrigger=new b.a,this.statsTrigger=new b.a,this.visable=!1,this.refreshing=!1}activateGroup(t){this.activeGroup=t,this.statsTrigger.next(t)}clearGroups(){this.modal.confirm().className("flat-attack").message("Cleaning finished groups?").isBlocking(!0).open().result.then(t=>{t&&this.modal.open(K,Object(d.m)({isBlocking:!0},h.b)).result.then(t=>{t&&this.refreshList()},()=>{})},()=>{})}ngOnInit(){const t=this;this.visable=!0,this.listGroup$=new class extends m.j{constructor(){super(...arguments),this.prerequest$=Object(p.a)([t.listTrigger,t.cmdService.listCmd$.verify(this.cmd)]).pipe(Object(g.a)(([,t])=>t))}},this.listGroup$.deploy(),this.listGroup$.getOutput().subscribe(t=>{this.refreshing=!1,0===t[1].length&&(this.groups=t[0].groups)}),this.refreshing=!0,this.listTrigger.next(1),this.stats$=new class extends m.e{constructor(){super(...arguments),this.prerequest$=Object(p.a)([t.cmdService.rst$.getOutput(),t.statsTrigger,t.cmdService.listCmd$.verify(this.cmd)]).pipe(Object(f.a)(()=>t.visable),Object(g.a)(([,t,e])=>0!==e[1].length?[{},e[1]]:""===t?e:[Object.assign(Object.assign({},e[0]),{group:t}),[]]))}},this.stats$.deploy(),this.statsTrigger.next("")}refreshList(){this.listGroup$.clearCache(),this.refreshing=!0,this.listTrigger.next(1)}ngOnDestroy(){this.visable=!1}}return t.\u0275fac=function(e){return new(e||t)(R.Yb(T.a),R.Yb(h.a))},t.\u0275cmp=R.Sb({type:t,selectors:[["app-jobs"]],decls:28,vars:9,consts:[["tag","group",4,"showItBootstrap"],["OptionsMenu",""],[4,"hideItBootstrap"],[1,"container-flex"],[1,"row"],[1,"col-xl-6","col-lg-7","col-md-6","col-sm-5","col-sx-12"],["size","small"],[1,"speed-body"],[3,"stats$"],[1,"col-xl-6","col-lg-5","col-md-6","col-sm-7","col-sx-12"],["icon","more-vertical",3,"click",4,"hideItBootstrap"],[1,"col"],["tag","group"],["icon","trash-2-outline",3,"click"],["icon","sync",3,"ngClass","click"],[3,"ngClass","click"],["icon","more-vertical",3,"click"],[3,"ngClass","click",4,"ngFor","ngForOf"],["icon","trash-2-outline",2,"margin","auto auto auto 0",3,"click"],["placeholder","Groups",2,"max-width","calc(100% - 2em - 3rem)","width","calc(100% - 2em - 3rem)",3,"selected","selectedChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){1&t&&(R.ec(0,"nb-layout"),R.Sc(1,E,10,7,"nb-sidebar",0),R.Zb(2,"app-job-group-options-context-menu",null,1),R.ec(4,"nb-layout-column"),R.Sc(5,W,8,5,"nb-card",2),R.ec(6,"div",3),R.ec(7,"div",4),R.ec(8,"div",5),R.ec(9,"nb-card",6),R.ec(10,"nb-card-header"),R.Uc(11," Speed "),R.dc(),R.ec(12,"nb-card-body",7),R.Zb(13,"app-rng-speed-chart",8),R.dc(),R.dc(),R.dc(),R.ec(14,"div",9),R.ec(15,"nb-card",6),R.ec(16,"nb-card-header"),R.Uc(17," Summary "),R.Sc(18,D,1,0,"nb-icon",10),R.dc(),R.ec(19,"nb-card-body"),R.Zb(20,"app-rng-summary",8),R.dc(),R.dc(),R.dc(),R.dc(),R.ec(21,"div",4),R.ec(22,"div",11),R.ec(23,"nb-card"),R.ec(24,"nb-card-header"),R.Uc(25," Transferring "),R.dc(),R.ec(26,"nb-card-body"),R.Zb(27,"app-jobs-transferring",8),R.dc(),R.dc(),R.dc(),R.dc(),R.dc(),R.dc(),R.dc()),2&t&&(R.Mb(1),R.wc("showItBootstrap",R.zc(6,Q)),R.Mb(4),R.wc("hideItBootstrap",R.zc(7,Q)),R.Mb(8),R.wc("stats$",e.stats$),R.Mb(5),R.wc("hideItBootstrap",R.zc(8,Q)),R.Mb(2),R.wc("stats$",e.stats$),R.Mb(7),R.wc("stats$",e.stats$))},directives:[s.I,a.e,z,s.H,a.a,s.r,s.u,s.q,B.a,Y.a,A,s.X,s.C,n.l,s.M,s.N,n.n,s.V,s.R],styles:["nb-card-header[_ngcontent-%COMP%]{display:flex}nb-card-header[_ngcontent-%COMP%] > nb-icon[_ngcontent-%COMP%]{margin-left:auto;margin-top:auto;margin-bottom:auto;font-size:1.5rem;cursor:pointer}nb-sidebar[_ngcontent-%COMP%]{border-left:solid;border-color:#000;border-left-width:.0668rem}[_nghost-%COMP%]   nb-select[_ngcontent-%COMP%]     button{min-width:unset}[_nghost-%COMP%]     .scrollable{display:contents}ul[_ngcontent-%COMP%]{list-style-type:none}li[_ngcontent-%COMP%]{border-bottom:1px solid #edf1f7}div.row[_ngcontent-%COMP%]{padding-top:1rem}.active-group[_ngcontent-%COMP%]{background-color:rgba(89,139,255,.53);border-radius:.25rem}.speed-body[_ngcontent-%COMP%]{padding:0;min-height:10rem;overflow-y:hidden}nb-list-item[_ngcontent-%COMP%] > nb-icon[_ngcontent-%COMP%]{margin-left:auto}"]}),t})()}];let et=(()=>{class t{}return t.\u0275mod=R.Wb({type:t}),t.\u0275inj=R.Vb({factory:function(e){return new(e||t)},imports:[[u.g.forChild(tt)],u.g]}),t})(),ct=(()=>{class t{}return t.\u0275mod=R.Wb({type:t}),t.\u0275inj=R.Vb({factory:function(e){return new(e||t)},imports:[[n.c,a.b,et,s.L,s.Y,s.v,o.d,s.O,s.E,i.b,l.a,s.W,s.o,s.x,s.bb,r.b]]}),t})()}}]);