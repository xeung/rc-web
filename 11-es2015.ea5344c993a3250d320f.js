(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{A8Ph:function(t,e,c){"use strict";c.r(e),c.d(e,"JobsModule",(function(){return H}));var n=c("ofXK"),s=c("aceb"),i=c("LPYB"),r=c("JU/d"),o=c("FTbq"),a=c("V2v1"),l=c("G3Ii"),u=c("tyNb"),d=c("U5lE"),h=c("x0Mr"),p=c("XNiG"),b=c("itXk"),g=c("lJxs"),f=c("GJmQ"),m=c("JYL7"),v=c("yCtX"),x=c("DH7j"),O=c("7o/Q"),C=c("Lhse"),y=c("zx2A");class w{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new M(t,this.resultSelector))}}class M extends O.a{constructor(t,e,c=Object.create(null)){super(t),this.resultSelector=e,this.iterators=[],this.active=0,this.resultSelector="function"==typeof e?e:void 0}_next(t){const e=this.iterators;Object(x.a)(t)?e.push(new S(t)):e.push("function"==typeof t[C.a]?new k(t[C.a]()):new j(this.destination,this,t))}_complete(){const t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(let c=0;c<e;c++){let e=t[c];e.stillUnsubscribed?this.destination.add(e.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const t=this.iterators,e=t.length,c=this.destination;for(let i=0;i<e;i++){let e=t[i];if("function"==typeof e.hasValue&&!e.hasValue())return}let n=!1;const s=[];for(let i=0;i<e;i++){let e=t[i],r=e.next();if(e.hasCompleted()&&(n=!0),r.done)return void c.complete();s.push(r.value)}this.resultSelector?this._tryresultSelector(s):c.next(s),n&&c.complete()}_tryresultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(c){return void this.destination.error(c)}this.destination.next(e)}}class k{constructor(t){this.iterator=t,this.nextResult=t.next()}hasValue(){return!0}next(){const t=this.nextResult;return this.nextResult=this.iterator.next(),t}hasCompleted(){const t=this.nextResult;return Boolean(t&&t.done)}}class S{constructor(t){this.array=t,this.index=0,this.length=0,this.length=t.length}[C.a](){return this}next(t){const e=this.index++;return e<this.length?{value:this.array[e],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class j extends y.b{constructor(t,e,c){super(t),this.parent=e,this.observable=c,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[C.a](){return this}next(){const t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(t){this.buffer.push(t),this.parent.checkIterators()}subscribe(){return Object(y.c)(this.observable,new y.a(this))}}var $=c("LRne"),G=c("zp1y"),_=c("eIep"),P=c("bOdf"),I=c("3E0/"),T=c("fXoL"),W=c("L7Zs");function K(t,e){if(1&t){const t=T.fc();T.ec(0,"nb-list-item",4),T.mc("click",(function(c){T.Kc(t);const n=e.index,s=T.oc();return s.check[n]=!s.check[n],c.preventDefault()})),T.ec(1,"nb-checkbox",5),T.mc("checkedChange",(function(c){T.Kc(t);const n=e.index;return T.oc().check[n]=c})),T.dc(),T.ec(2,"label"),T.Wc(3),T.dc(),T.dc()}if(2&t){const t=e.$implicit,c=e.index,n=T.oc();T.Mb(1),T.wc("checked",n.check[c]),T.Mb(2),T.Xc(t)}}let B=(()=>{class t{constructor(t,e){this.dialog=t,this.cmdService=e,this.finishedGroup=[],this.check=[],this.loading=!1,this.deleteTrigger=new p.a,this.context=t.context}confirm(){this.deleteTrigger.next(this.finishedGroup.filter((t,e)=>this.check[e])),this.dialog.close()}ngOnInit(){const t=this,e=new p.a,c=new class extends m.j{constructor(){super(...arguments),this.prerequest$=e.pipe(Object(G.a)(t.cmdService.listCmd$.verify(this.cmd)),Object(g.a)(t=>t[1]))}};c.deploy();const n=new class extends m.e{constructor(){super(...arguments),this.prerequest$=e.pipe(Object(G.a)(t.cmdService.listCmd$.verify(this.cmd)),Object(g.a)(t=>t[1]))}};n.deploy(),this.loading=!0,c.clearCache(),n.clearCache(),function(...t){const e=t[t.length-1];return"function"==typeof e&&t.pop(),Object(v.a)(t,void 0).lift(new w(e))}(c.getOutput(),n.getOutput()).subscribe(([t,e])=>{if(this.loading=!1,0!==t[1].length||0!==e[1].length)return;const c=e[0]["core-stats"].transferring;this.finishedGroup=c?t[0].groups.filter(t=>!c.some(e=>t===e.group)):t[0].groups,this.check=this.finishedGroup.map(()=>!0)}),e.next(),this.deleteStates$=new class extends m.d{constructor(){super(...arguments),this.prerequest$=t.deleteTrigger.pipe(Object(G.a)(t.cmdService.listCmd$.verify(this.cmd)),Object(_.a)(([t,e])=>0!==e[1].length?Object($.a)([{},e[1]]):Object($.a)(...t.map(t=>[Object.assign(Object.assign({},e[0]),{group:t}),[]]))),Object(P.a)(t=>Object($.a)(t).pipe(Object(I.a)(1e3))))}},this.deleteStates$.deploy(),this.deleteStates$.getOutput().subscribe()}}return t.\u0275fac=function(e){return new(e||t)(T.Yb(d.d),T.Yb(W.a))},t.\u0275cmp=T.Sb({type:t,selectors:[["ng-component"]],decls:11,vars:2,consts:[["spinnerMessage","Loading...",3,"nbSpinner"],[3,"click",4,"ngFor","ngForOf"],["nbButton","","status","danger",3,"click"],["nbButton","","status","success",1,"push-to-right",3,"click"],[3,"click"],[3,"checked","checkedChange"]],template:function(t,e){1&t&&(T.ec(0,"nb-card"),T.ec(1,"nb-card-header"),T.Wc(2," Select groups to be deleted "),T.dc(),T.ec(3,"nb-card-body",0),T.ec(4,"nb-list"),T.Uc(5,K,4,2,"nb-list-item",1),T.dc(),T.dc(),T.ec(6,"nb-card-footer"),T.ec(7,"button",2),T.mc("click",(function(){return e.dialog.dismiss()})),T.Wc(8,"Close"),T.dc(),T.ec(9,"button",3),T.mc("click",(function(){return e.confirm()})),T.Wc(10," Confirm "),T.dc(),T.dc(),T.dc()),2&t&&(T.Mb(3),T.wc("nbSpinner",e.loading),T.Mb(2),T.wc("ngForOf",e.finishedGroup))},directives:[s.r,s.u,s.q,s.ab,s.M,n.n,s.s,s.n,s.N,s.w],styles:["nb-card[_ngcontent-%COMP%] {\n\t\t\t\tmargin: calc(-1em - 5px);\n\t\t\t}\n\t\t\tnb-card-header[_ngcontent-%COMP%], nb-card-footer[_ngcontent-%COMP%] {\n\t\t\t\tdisplay: flex;\n\t\t\t}\n\t\t\tlabel[_ngcontent-%COMP%] {\n\t\t\t\tpadding-left: 0.75rem;\n\t\t\t}\n\t\t\t.push-to-right[_ngcontent-%COMP%] {\n\t\t\t\tmargin-left: auto;\n\t\t\t}"]}),t})();function L(t,e){1&t&&(T.Zb(0,"nb-icon",2),T.Wc(1," Reset stats "))}let Y=(()=>{class t{constructor(t,e,c){this.contextMenuService=t,this.cmdService=e,this.toastrService=c,this.resetTrigger=new p.a}onContextMenu(t,e){this.contextMenuService.show.next({contextMenu:this.contextMenu,event:t,item:e}),t.preventDefault(),t.stopPropagation()}resetStats(t){this.resetTrigger.next(t)}ngOnInit(){const t=this;this.resetStats$=new class extends m.f{constructor(){super(...arguments),this.prerequest$=t.resetTrigger.pipe(Object(G.a)(t.cmdService.listCmd$.verify(this.cmd)),Object(g.a)(([t,e])=>0!==e[1].length?[{},e[1]]:t&&""!==t?[Object.assign(Object.assign({},e[0]),{group:t}),[]]:e))}},this.resetStats$.deploy(),this.resetStats$.getSupersetOutput().subscribe(t=>{let e=t[0]&&t[0].group;e||(e="[All]"),0===t[1].length?this.toastrService.success(""+e,"Reset stats success"):this.toastrService.danger(""+e,"Reset stats failure")})}}return t.\u0275fac=function(e){return new(e||t)(T.Yb(r.c),T.Yb(W.a),T.Yb(s.ib))},t.\u0275cmp=T.Sb({type:t,selectors:[["app-job-group-options-context-menu"]],inputs:{contextMenu:"contextMenu"},decls:3,vars:0,consts:[["OptionMenu",""],["contextMenuItem","",3,"execute"],["icon","refresh"]],template:function(t,e){1&t&&(T.ec(0,"context-menu",null,0),T.Uc(2,L,2,0,"ng-template",1),T.mc("execute",(function(t){return e.resetStats(t.item)})),T.dc())},directives:[r.a,r.d,s.C],encapsulation:2}),t})();var U=c("gVoi"),F=c("3RaO"),R=c("64Tx");const V=function(t){return{"active-group":t}};function q(t,e){if(1&t){const t=T.fc();T.ec(0,"nb-list-item",15),T.mc("click",(function(){T.Kc(t);const c=e.$implicit;return T.oc(2).activateGroup(c)})),T.Wc(1),T.ec(2,"nb-icon",16),T.mc("click",(function(c){T.Kc(t);const n=e.$implicit;return T.oc(2),T.Gc(3).onContextMenu(c,n)})),T.dc(),T.dc()}if(2&t){const t=e.$implicit,c=T.oc(2);T.wc("ngClass",T.Ac(2,V,c.activeGroup===t)),T.Mb(1),T.Yc(" ",t," ")}}const A=function(t){return{"infinte-rotate":t}};function z(t,e){if(1&t){const t=T.fc();T.ec(0,"nb-sidebar",12),T.ec(1,"nb-card-header"),T.Wc(2," Groups "),T.ec(3,"nb-icon",13),T.mc("click",(function(){return T.Kc(t),T.oc().clearGroups()})),T.dc(),T.ec(4,"nb-icon",14),T.mc("click",(function(){return T.Kc(t),T.oc().refreshList()})),T.dc(),T.dc(),T.ec(5,"nb-list"),T.ec(6,"nb-list-item",15),T.mc("click",(function(){return T.Kc(t),T.oc().activateGroup("")})),T.Wc(7," [All] "),T.ec(8,"nb-icon",16),T.mc("click",(function(e){return T.Kc(t),T.oc(),T.Gc(3).onContextMenu(e,"")})),T.dc(),T.dc(),T.Uc(9,q,3,4,"nb-list-item",17),T.dc(),T.dc()}if(2&t){const t=T.oc();T.Mb(4),T.wc("ngClass",T.Ac(3,A,t.refreshing)),T.Mb(2),T.wc("ngClass",T.Ac(5,V,""===t.activeGroup)),T.Mb(3),T.wc("ngForOf",t.groups)}}function J(t,e){if(1&t&&(T.ec(0,"nb-option",22),T.Wc(1),T.dc()),2&t){const t=e.$implicit;T.wc("value",t),T.Mb(1),T.Yc(" ",t,"")}}function X(t,e){if(1&t){const t=T.fc();T.ec(0,"nb-card"),T.ec(1,"nb-card-header"),T.ec(2,"nb-icon",18),T.mc("click",(function(){return T.Kc(t),T.oc().clearGroups()})),T.dc(),T.ec(3,"nb-select",19),T.mc("selectedChange",(function(e){return T.Kc(t),T.oc().activeGroup=e}))("selectedChange",(function(){T.Kc(t);const e=T.oc();return e.activateGroup(e.activeGroup)})),T.ec(4,"nb-option",20),T.Wc(5,"[All]"),T.dc(),T.Uc(6,J,2,2,"nb-option",21),T.dc(),T.ec(7,"nb-icon",14),T.mc("click",(function(){return T.Kc(t),T.oc().refreshList()})),T.dc(),T.dc(),T.dc()}if(2&t){const t=T.oc();T.Mb(3),T.wc("selected",t.activeGroup),T.Mb(3),T.wc("ngForOf",t.groups),T.Mb(1),T.wc("ngClass",T.Ac(3,A,t.refreshing))}}function N(t,e){if(1&t){const t=T.fc();T.ec(0,"nb-icon",16),T.mc("click",(function(e){T.Kc(t);const c=T.oc();return T.Gc(3).onContextMenu(e,c.activeGroup)})),T.dc()}}const Z=function(){return["xl"]},D=[{path:"",component:(()=>{class t{constructor(t,e){this.cmdService=t,this.modal=e,this.activeGroup="",this.groups=[],this.listTrigger=new p.a,this.statsTrigger=new p.a,this.visable=!1,this.refreshing=!1}activateGroup(t){this.activeGroup=t,this.statsTrigger.next(t)}clearGroups(){this.modal.confirm().className("flat-attack").message("Cleaning finished groups?").isBlocking(!0).open().result.then(t=>{t&&this.modal.open(B,Object(d.m)({isBlocking:!0},h.b)).result.then(t=>{t&&this.refreshList()},()=>{})},()=>{})}ngOnInit(){const t=this;this.visable=!0,this.listGroup$=new class extends m.j{constructor(){super(...arguments),this.prerequest$=Object(b.a)([t.listTrigger,t.cmdService.listCmd$.verify(this.cmd)]).pipe(Object(g.a)(([,t])=>t))}},this.listGroup$.deploy(),this.listGroup$.getOutput().subscribe(t=>{this.refreshing=!1,0===t[1].length&&(this.groups=t[0].groups)}),this.refreshing=!0,this.listTrigger.next(1),this.stats$=new class extends m.e{constructor(){super(...arguments),this.prerequest$=Object(b.a)([t.cmdService.rst$.getOutput(),t.statsTrigger,t.cmdService.listCmd$.verify(this.cmd)]).pipe(Object(f.a)(()=>t.visable),Object(g.a)(([,t,e])=>0!==e[1].length?[{},e[1]]:""===t?e:[Object.assign(Object.assign({},e[0]),{group:t}),[]]))}},this.stats$.deploy(),this.statsTrigger.next("")}refreshList(){this.listGroup$.clearCache(),this.refreshing=!0,this.listTrigger.next(1)}ngOnDestroy(){this.visable=!1}}return t.\u0275fac=function(e){return new(e||t)(T.Yb(W.a),T.Yb(h.a))},t.\u0275cmp=T.Sb({type:t,selectors:[["app-jobs"]],decls:28,vars:9,consts:[["tag","group",4,"showItBootstrap"],["OptionsMenu",""],[4,"hideItBootstrap"],[1,"container-flex"],[1,"row"],[1,"col-xl-6","col-lg-7","col-md-6","col-sm-5","col-sx-12"],["size","small"],[1,"speed-body"],[3,"stats$"],[1,"col-xl-6","col-lg-5","col-md-6","col-sm-7","col-sx-12"],["icon","more-vertical",3,"click",4,"hideItBootstrap"],[1,"col"],["tag","group"],["icon","trash-2-outline",3,"click"],["icon","sync",3,"ngClass","click"],[3,"ngClass","click"],["icon","more-vertical",3,"click"],[3,"ngClass","click",4,"ngFor","ngForOf"],["icon","trash-2-outline",2,"margin","auto auto auto 0",3,"click"],["placeholder","Groups",2,"max-width","calc(100% - 2em - 3rem)","width","calc(100% - 2em - 3rem)",3,"selected","selectedChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){1&t&&(T.ec(0,"nb-layout"),T.Uc(1,z,10,7,"nb-sidebar",0),T.Zb(2,"app-job-group-options-context-menu",null,1),T.ec(4,"nb-layout-column"),T.Uc(5,X,8,5,"nb-card",2),T.ec(6,"div",3),T.ec(7,"div",4),T.ec(8,"div",5),T.ec(9,"nb-card",6),T.ec(10,"nb-card-header"),T.Wc(11," Speed "),T.dc(),T.ec(12,"nb-card-body",7),T.Zb(13,"app-rng-speed-chart",8),T.dc(),T.dc(),T.dc(),T.ec(14,"div",9),T.ec(15,"nb-card",6),T.ec(16,"nb-card-header"),T.Wc(17," Summary "),T.Uc(18,N,1,0,"nb-icon",10),T.dc(),T.ec(19,"nb-card-body"),T.Zb(20,"app-rng-summary",8),T.dc(),T.dc(),T.dc(),T.dc(),T.ec(21,"div",4),T.ec(22,"div",11),T.ec(23,"nb-card"),T.ec(24,"nb-card-header"),T.Wc(25," Transferring "),T.dc(),T.ec(26,"nb-card-body"),T.Zb(27,"app-transfer-list",8),T.dc(),T.dc(),T.dc(),T.dc(),T.dc(),T.dc(),T.dc()),2&t&&(T.Mb(1),T.wc("showItBootstrap",T.zc(6,Z)),T.Mb(4),T.wc("hideItBootstrap",T.zc(7,Z)),T.Mb(8),T.wc("stats$",e.stats$),T.Mb(5),T.wc("hideItBootstrap",T.zc(8,Z)),T.Mb(2),T.wc("stats$",e.stats$),T.Mb(7),T.wc("stats$",e.stats$))},directives:[s.I,a.e,Y,s.H,a.a,s.r,s.u,s.q,U.a,F.a,R.a,s.X,s.C,n.l,s.M,s.N,n.n,s.V,s.R],styles:["nb-card-header[_ngcontent-%COMP%]{display:flex}nb-card-header[_ngcontent-%COMP%] > nb-icon[_ngcontent-%COMP%]{margin-left:auto;margin-top:auto;margin-bottom:auto;font-size:1.5rem;cursor:pointer}nb-sidebar[_ngcontent-%COMP%]{border-left:solid;border-color:#000;border-left-width:.0668rem}[_nghost-%COMP%]   nb-select[_ngcontent-%COMP%]     button{min-width:unset}[_nghost-%COMP%]     .scrollable{display:contents}ul[_ngcontent-%COMP%]{list-style-type:none}li[_ngcontent-%COMP%]{border-bottom:1px solid #edf1f7}div.row[_ngcontent-%COMP%]{padding-top:1rem}.active-group[_ngcontent-%COMP%]{background-color:rgba(89,139,255,.5333333333333333);border-radius:.25rem}.speed-body[_ngcontent-%COMP%]{padding:0;min-height:10rem;overflow-y:hidden}nb-list-item[_ngcontent-%COMP%] > nb-icon[_ngcontent-%COMP%]{margin-left:auto}"]}),t})()}];let E=(()=>{class t{}return t.\u0275mod=T.Wb({type:t}),t.\u0275inj=T.Vb({factory:function(e){return new(e||t)},imports:[[u.g.forChild(D)],u.g]}),t})(),H=(()=>{class t{}return t.\u0275mod=T.Wb({type:t}),t.\u0275inj=T.Vb({factory:function(e){return new(e||t)},imports:[[n.c,a.b,E,s.L,s.Y,s.v,o.d,s.O,s.E,i.b,l.a,s.W,s.o,s.x,s.bb,r.b]]}),t})()}}]);